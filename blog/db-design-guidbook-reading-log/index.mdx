---
  title: 達人に学ぶDB設計 徹底指南書 読書記録
  date: 2023-02-01
  topics: ["読書記録"]
  isArchive: true
---

# 1 章
要約
DBの種類、設計、スキーマなどについての用語説明


<!-- TODO: 1章の課題を書く -->

クエリの並列化とか、重いクエリの見直しとか。

## データベースの代表的なモデル

- リレーショナルデータベース RDB

- オブジェクト指向データベース OODB

- XML データベース

- キーバリューストア KVS

- 改装型データベース

## システム設計の工程、設計

大分類として 要件定義 ⇨ 設計 ⇨ 実装 ⇨ テスト の流れを踏む事が多い

- 要件定義
システムが満たすべき機能(機能要件)や水準(非機能要件)を決める工程。
 - 機能要件
 例. ユーザー検索機能、動画投稿機能など
 - 非機能要件
 例. サービスにアクセスしてコンテンツが描画されるまでの時間を1秒以内に抑える等(他にもセキュリティ、保守性、拡張性など)
- 設計
本書がフォーカスを当てているのがこの設計工程で、DB において DB 設計は非常に重要である。

- 開発
主な手法
  - ウォーターフォール
  要件定義 ⇨ 設計 ⇨ 実装 ⇨ テスト の工程を踏んで進める
  基本的に後戻りをする事がない。大規模システムで採用される事が多い。「スケジュールや進捗を把握し易い」「品質を保ち易い」などのメリットがありつつ「仕様変更が難しい」「開発が長期化しやすい」などのデメリットがある。
  - プロトタイピング
  名前の通りプロトタイプを作ってフォードバックをもらい、改良版を作って...を繰り返す開発手法。早い段階から実際に動くシステムを教諭できるので意思疎通の齟齬を防げるなどのメリットがあり、スケジュール管理が難しい、変更を繰り返すうちに収集がつかなくなるなどのデメリットがある。
  - アジャイル
  開発を継続的な反復と改善のサイクルに分割し、各反復で顧客のニーズに合わせてソフトウェアを開発する。ß

## 3 層スキーマ

- 外部スキーマ
ユーザーから見たDB。テーブルやビュー。
- 概念スキーマ
開発者から見たDB。テーブル定義やデータ同士の関係など。
概念スキーマの設計を「論理設計」と呼ぶ
- 内部スキーマ
DBMSから見たDB。実際のファイル(記憶装置)上でのテーブルやインデックスの設定など。内部スキーマの設計を「物理設計」と呼ぶ。

## Web3 層モデル
- プレゼンテーション層
Webサーバー
- アプリケーション層
アプリケーションサーバー
- データ層
データベースサーバー

## DBMS

DBMS とは
[データベースの代表的なモデル](##データベースの代表的なモデル)の実装。
OracleDatabase, PostgreSQL, MySQLなど

## 1 章の感想

出てきた単語の意味はある程度知っていたが、改めて整理できた。
Web3 層モデルと DB の 3 層スキーマを関連して考えることがなかったが、概念は共通するものがあって、理解が深まったと思う。
ソフトウェア開発の世界って、フロントエンドとバックエンドなどで触る場所は違っても概念は同じである事が結構多い気がしていて、抽象的な概念を理解できると、新しい技術でも習得が早まると思った。

# 2 章
要約
論理設計・物理設計の手法・手順・用語の説明
バックアップ・リカバリなどの話


# 3 章

```shell
正規化についての話
やっていることは結局、複数のエンティティを持ってるテーブルを
外部キー制約で中間テーブルに細かく切り出して行く作業のこと
```

## 3 章の感想

正規化という言葉は知っていたが、いくつかに分かれるということを知らなかった
いろんなエンティティや、中間テーブルに切り出せる情報を一つのテーブルに収めようとすると
いろいろ不都合が出てくる。NULLABLE なレコード追加したくなった時にダミーのデータを入れる必要があるなど。

正規化で分割していき、SQL の内部結合・外部結合で情報を取ってくる。正規化と内部結合外部結合が繋がった。

### 正規系

スカラ値

## 5章
正規化・非正規化  パフォーマンスの話
可能な限り高次元に正規化するのが良い

## 6章
インデックスの話
目的のデータを探しだす計算量を高速かする
B-tree index がメジャー
平衡木 O(logn)　ソートされているので(バイナリサーチが使える)

カーディナリティ
ある列が取りうるデータの種類
「性別」なら 3 「男性」「女性」「その他」など

インデックスを貼るべき列の話とか
インデックスに対する意味のないSQLの話

## 6 章の感想
インデックスは知っていたが、種類とかアルゴリズムまでは知らんかった。
有効に使うためには、どのテーブルにインデックスを貼るかの他に
SQLも気をつける必要がある。
